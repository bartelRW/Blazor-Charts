<!-- General Chart-Component to load individual charts -->
<ChartComponent CanvasId="LineChart" ChartConfig="@ChartConfig" />

@code {
    //Get Data from main component
    [CascadingParameter(Name = "ChartData")]
    private List<int>? ChartData { get; set; } = new();

    private object? ChartConfig { get; set; }

    // Create Chart Config
    protected override void OnInitialized()
    {
        if (ChartData is not null && ChartData.Count > 0)
        {
            // Generate labels based on current time for each data point
            var labels = ChartData.Select(cd => string.Format("{0:dd.MM.yy HH:mm}", DateTime.Now)).ToList();
            var data = ChartData;

            ChartConfig = new
            {
                type = "line",
                data = new
                {
                    labels = labels,
                    datasets = new object[]
                    {
                        new {
                            label = "value",
                            data = data,
                            radius = 0,
                            backgroundColor = "rgba(162, 210, 8, 0.6)",
                            borderColor =  "#a2d208",
                            fill = false,
                        },
                    }
                },
                options = new
                {
                    responsive = true,
                    maintainAspectRatio = false,
                    animation = false,

                    plugins = new
                    {
                        legend = new
                        {
                            display = false,
                        },

                        zoom = new
                        {
                            zoom = new
                            {
                                wheel = new
                                {
                                    enabled = true,
                                },
                                pinch = new
                                {
                                    enabled = true,
                                },
                                drag = new
                                {
                                    enabled = true,
                                },
                                pan = new
                                {
                                    enabled = true,
                                },
                                mode = "x",
                            }
                        }
                    },

                    scales = new
                    {
                        x = new
                        {
                            grid = new
                            {
                                display = false,
                            },
                        },
                        y = new
                        {
                            beginAtZero = true,
                            title = new
                            {
                                padding = 0,
                                display = true,
                            }
                        }
                    },

                    Interaction = new
                    {
                        mode = "index",
                        axis = "x",
                        intersect = false,
                    },

                    hover = new
                    {
                        mode = "index",
                        intersect = false,
                    }
                }
            };
        }
    }
}